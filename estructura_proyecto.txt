OFTALMETRYC - AnÃ¡lisis Estructural del Proyecto
=============================================

ğŸ“ ROOT/
â”œâ”€â”€ ğŸ“ adapters/                      # Capa de adaptadores (interfaces externas)
â”‚   â”œâ”€â”€ ğŸ“ input/                     # Adaptadores de entrada (API, UI)
â”‚   â”‚   â””â”€â”€ ğŸ“ flask_app/            # AplicaciÃ³n Flask
â”‚   â”‚       â”œâ”€â”€ ğŸ“ controllers/      # Controladores de la aplicaciÃ³n
â”‚   â”‚       â”‚   â”œâ”€â”€ ficha_clinica_controller_nuevo.py  # Control de fichas clÃ­nicas
â”‚   â”‚       â”‚   â”œâ”€â”€ paciente_controller.py             # Control de pacientes
â”‚   â”‚       â”‚   â”œâ”€â”€ product_controller.py              # Control de productos e inventario
â”‚   â”‚       â”‚   â”œâ”€â”€ proveedor_controller.py            # Control de proveedores
â”‚   â”‚       â”‚   â”œâ”€â”€ sale_pages_routes.py              # Control de pÃ¡ginas de venta
â”‚   â”‚       â”‚   â””â”€â”€ user_controller.py                # Control de usuarios y autenticaciÃ³n
â”‚   â”‚       â”œâ”€â”€ ğŸ“ static/          # Archivos estÃ¡ticos
â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“ img/        # ImÃ¡genes
â”‚   â”‚       â”œâ”€â”€ ğŸ“ templates/       # Plantillas HTML
â”‚   â”‚       â”‚   â”œâ”€â”€ base.html      # Plantilla base
â”‚   â”‚       â”‚   â”œâ”€â”€ medical/       # Plantillas mÃ³dulo mÃ©dico
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ dashboard_medico_final.html    # Dashboard principal Ã¡rea mÃ©dica
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ ficha_clinica_nuevo.html       # Formulario nueva ficha clÃ­nica
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ pacientes_nuevo.html           # Vista gestiÃ³n de pacientes
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ biomicroscopia_nuevo.html      # Formulario examen biomicroscopÃ­a
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ certificado.html               # GeneraciÃ³n de certificados mÃ©dicos
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ consultas_nuevo.html           # Registro nueva consulta mÃ©dica
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ detalle_consulta.html          # Vista detalle de consulta
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ editar_consulta.html           # EdiciÃ³n de consulta existente
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ editar_paciente.html           # EdiciÃ³n datos del paciente
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ historial_paciente.html        # Historial mÃ©dico del paciente
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ nuevo_paciente_form.html       # Formulario nuevo paciente
â”‚   â”‚       â”‚   â”œâ”€â”€ base.html                # Plantilla base con estructura comÃºn y navegaciÃ³n
â”‚   â”‚       â”‚   â”œâ”€â”€ boleta.html            # GeneraciÃ³n y visualizaciÃ³n de boletas de venta
â”‚   â”‚       â”‚   â”œâ”€â”€ confirmar_venta.html   # ConfirmaciÃ³n y resumen final de venta
â”‚   â”‚       â”‚   â”œâ”€â”€ dashboard.html         # Panel principal con indicadores y resumen
â”‚   â”‚       â”‚   â”œâ”€â”€ historial_ventas.html  # Registro histÃ³rico de todas las ventas
â”‚   â”‚       â”‚   â”œâ”€â”€ inventario.html        # GestiÃ³n y control de inventario
â”‚   â”‚       â”‚   â”œâ”€â”€ login.html            # PÃ¡gina de inicio de sesiÃ³n
â”‚   â”‚       â”‚   â”œâ”€â”€ productos.html        # AdministraciÃ³n de productos y precios
â”‚   â”‚       â”‚   â”œâ”€â”€ proveedores.html      # GestiÃ³n de proveedores
â”‚   â”‚       â”‚   â”œâ”€â”€ registrar_venta.html  # Formulario para nueva venta
â”‚   â”‚       â”‚   â”œâ”€â”€ request_reset.html    # Solicitud de reseteo de contraseÃ±a
â”‚   â”‚       â”‚   â”œâ”€â”€ reset_password.html   # Formulario de cambio de contraseÃ±a
â”‚   â”‚       â”‚   â””â”€â”€ usuarios.html         # AdministraciÃ³n de usuarios y roles
â”‚   â”‚       â”œâ”€â”€ __init__.py        # InicializaciÃ³n Flask
â”‚   â”‚       â”œâ”€â”€ medical_routes.py   # Rutas mÃ©dicas
â”‚   â”‚       â”œâ”€â”€ product_routes.py   # Rutas productos
â”‚   â”‚       â”œâ”€â”€ proveedor_routes.py # Rutas proveedores
â”‚   â”‚       â”œâ”€â”€ routes.py          # Rutas principales
â”‚   â”‚       â”œâ”€â”€ sale_routes.py     # Rutas ventas
â”‚   â”‚       â””â”€â”€ user_routes.py     # Rutas usuarios

â”œâ”€â”€ ğŸ“ app/                          # NÃºcleo de la aplicaciÃ³n
â”‚   â”œâ”€â”€ ğŸ“ domain/                   # Capa de dominio
â”‚   â”‚   â”œâ”€â”€ ğŸ“ models/              # Modelos de dominio
â”‚   â”‚   â”‚   â”œâ”€â”€ biomicroscopia.py   # Modelo examen biomicroscopÃ­a
â”‚   â”‚   â”‚   â”œâ”€â”€ cliente.py         # Modelo cliente
â”‚   â”‚   â”‚   â”œâ”€â”€ consulta_medica.py # Modelo consulta mÃ©dica
â”‚   â”‚   â”‚   â”œâ”€â”€ examenes_medicos.py # Modelos exÃ¡menes
â”‚   â”‚   â”‚   â”œâ”€â”€ paciente.py        # Modelo paciente
â”‚   â”‚   â”‚   â”œâ”€â”€ products.py        # Modelo productos
â”‚   â”‚   â”‚   â”œâ”€â”€ proveedor.py       # Modelo proveedor
â”‚   â”‚   â”‚   â”œâ”€â”€ rol.py            # Modelo roles
â”‚   â”‚   â”‚   â”œâ”€â”€ sale.py           # Modelo ventas
â”‚   â”‚   â”‚   â””â”€â”€ user.py           # Modelo usuarios
â”‚   â”‚   â””â”€â”€ ğŸ“ use_cases/          # Casos de uso
â”‚   â”‚       â”œâ”€â”€ product_use_cases.py   # Casos de uso relacionados con productos
â”‚   â”‚       â””â”€â”€ ğŸ“ services/       # Servicios de dominio
â”‚   â”‚           â”œâ”€â”€ biomicroscopia_service.py  # Servicio para exÃ¡menes de biomicroscopÃ­a
â”‚   â”‚           â”œâ”€â”€ cliente_service.py         # Servicio de gestiÃ³n de clientes
â”‚   â”‚           â”œâ”€â”€ sale_service.py           # Servicio de procesamiento de ventas
â”‚   â”‚           â””â”€â”€ user_service.py           # Servicio de gestiÃ³n de usuarios
â”‚   â””â”€â”€ ğŸ“ infrastructure/          # Capa de infraestructura
â”‚       â”œâ”€â”€ ğŸ“ repositories/        # Repositorios
â”‚       â”‚   â”œâ”€â”€ biomicroscopia_repository.py  # Repositorio para exÃ¡menes de biomicroscopÃ­a
â”‚       â”‚   â”œâ”€â”€ proveedor_repository.py       # Repositorio de proveedores
â”‚       â”‚   â”œâ”€â”€ sql_cliente_repository.py     # Repositorio de clientes
â”‚       â”‚   â”œâ”€â”€ sql_diagnostico_repository.py # Repositorio de diagnÃ³sticos mÃ©dicos
â”‚       â”‚   â”œâ”€â”€ sql_product_repository.py     # Repositorio de productos
â”‚       â”‚   â”œâ”€â”€ sql_sale_repository.py        # Repositorio de ventas
â”‚       â”‚   â””â”€â”€ sql_user_repository.py        # Repositorio de usuarios
â”‚       â””â”€â”€ ğŸ“ utils/               # Utilidades
â”‚           â”œâ”€â”€ currency_utils.py   # Utilidades monetarias
â”‚           â”œâ”€â”€ date_utils.py      # Utilidades fechas
â”‚           â”œâ”€â”€ db.py             # ConfiguraciÃ³n BD
â”‚           â”œâ”€â”€ db_session.py     # Manejo sesiones
â”‚           â”œâ”€â”€ exceptions.py     # Excepciones
â”‚           â”œâ”€â”€ init_db.py       # InicializaciÃ³n BD
â”‚           â””â”€â”€ tables.py        # DefiniciÃ³n tablas

â”œâ”€â”€ ğŸ“ config/                       # ConfiguraciÃ³n
â”‚   â”œâ”€â”€ settings.py                 # Configuraciones
â”‚   â””â”€â”€ __init__.py

â”œâ”€â”€ boot.py                         # Archivo arranque
â”œâ”€â”€ esquema_optica_actual_21_octubre.sql  # Esquema BD
â”œâ”€â”€ render.yaml                     # Config despliegue
â”œâ”€â”€ requirements.txt                # Dependencias
â””â”€â”€ README.md                       # DocumentaciÃ³n

Detalles Importantes:
====================

1. Arquitectura
--------------
- DiseÃ±o hexagonal (puertos y adaptadores)
- SeparaciÃ³n clara de responsabilidades
- Independencia entre capas

2. MÃ³dulos Principales
---------------------
a) Ventas
   - Registro de ventas
   - GestiÃ³n de productos
   - Boletas
   - Historial

b) MÃ©dico
   - Fichas clÃ­nicas
   - ExÃ¡menes oftalmolÃ³gicos
   - Historial mÃ©dico
   - GestiÃ³n pacientes

c) AdministraciÃ³n
   - Usuarios y roles
   - Dashboard
   - Reportes

3. TecnologÃ­as
-------------
- Backend: Python/Flask
- Base de datos: PostgreSQL
- Frontend: HTML5, Bootstrap, JavaScript
- ORM: SQLAlchemy

4. Patrones de DiseÃ±o
--------------------
- Repository Pattern
- Service Layer
- MVC (en la capa web)
- DTO/Serializers

5. Seguridad
-----------
- AutenticaciÃ³n por sesiones
- Roles y permisos
- ValidaciÃ³n de datos
- ProtecciÃ³n contra CSRF

6. CaracterÃ­sticas Destacadas
---------------------------
- GestiÃ³n completa de ventas
- Sistema de fichas mÃ©dicas
- ExÃ¡menes oftalmolÃ³gicos
- GestiÃ³n de inventario
- Reportes y estadÃ­sticas
- Multi-usuario
- Roles diferenciados